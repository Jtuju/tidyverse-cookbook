<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Visualize Data | The Tidyverse Cookbook</title>
  <meta name="description" content="How to solve common data science tasks with R’s Tidyverse" />
  <meta name="generator" content="bookdown 0.20.1 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Visualize Data | The Tidyverse Cookbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="How to solve common data science tasks with R’s Tidyverse" />
  <meta name="github-repo" content="rstudio-education/tidyverse-cookbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Visualize Data | The Tidyverse Cookbook" />
  
  <meta name="twitter:description" content="How to solve common data science tasks with R’s Tidyverse" />
  

<meta name="author" content="Edited by Garrett Grolemund" />


<meta name="date" content="2020-07-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="transform-dates-and-times.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Tidyverse Cookbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html"><i class="fa fa-check"></i>How to use this book</a></li>
<li class="part"><span><b>I The Recipes</b></span></li>
<li class="chapter" data-level="1" data-path="program.html"><a href="program.html"><i class="fa fa-check"></i><b>1</b> Program</a></li>
<li class="chapter" data-level="2" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>2</b> Import</a></li>
<li class="chapter" data-level="3" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>3</b> Tidy</a></li>
<li class="chapter" data-level="4" data-path="transform-tables.html"><a href="transform-tables.html"><i class="fa fa-check"></i><b>4</b> Transform Tables</a></li>
<li class="chapter" data-level="5" data-path="transform-lists-and-vectors.html"><a href="transform-lists-and-vectors.html"><i class="fa fa-check"></i><b>5</b> Transform Lists and Vectors</a></li>
<li class="chapter" data-level="6" data-path="transform-strings.html"><a href="transform-strings.html"><i class="fa fa-check"></i><b>6</b> Transform Strings</a></li>
<li class="chapter" data-level="7" data-path="transform-factors.html"><a href="transform-factors.html"><i class="fa fa-check"></i><b>7</b> Transform Factors</a></li>
<li class="chapter" data-level="8" data-path="transform-dates-and-times.html"><a href="transform-dates-and-times.html"><i class="fa fa-check"></i><b>8</b> Transform Dates and Times</a></li>
<li class="chapter" data-level="9" data-path="visualize-data.html"><a href="visualize-data.html"><i class="fa fa-check"></i><b>9</b> Visualize Data</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Tidyverse Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualize-data" class="section level1">
<h1><span class="header-section-number">9</span> Visualize Data</h1>
<hr />
<div class="col2">
<ol style="list-style-type: decimal">
<li><a href="visualize-data.html#make-a-plot">Make a plot</a></li>
<li><a href="visualize-data.html#make-a-specific-type-of-plot-like-a-line-plot-bar-chart-etc.">Make a specific “type” of plot, like a line plot, bar chart, etc.</a></li>
<li><a href="visualize-data.html#add-a-variable-to-a-plot-as-a-color-shape-etc.">Add a variable to a plot as a color, shape, etc.</a></li>
<li><a href="visualize-data.html#add-multiple-layers-to-a-plot">Add multiple layers to a plot</a></li>
<li><a href="visualize-data.html#subdivide-a-plot-into-multiple-subplots">Subdivide a plot into multiple subplots</a></li>
<li><a href="visualize-data.html#add-a-title-subtitle-or-caption-to-a-plot">Add a title, subtitle, or caption to a plot</a></li>
<li><a href="visualize-data.html#change-the-axis-labels-of-a-plot">Change the axis labels of a plot</a></li>
<li><a href="visualize-data.html#change-the-title-of-a-legend">Change the title of a legend</a></li>
<li><a href="visualize-data.html#change-the-names-within-a-legend">Change the names within a legend</a></li>
<li><a href="visualize-data.html#remove-the-legend-from-a-plot">Remove the legend from a plot</a></li>
<li><a href="visualize-data.html#change-the-appearance-or-look-of-a-plot">Change the appearance or look of a plot</a></li>
<li><a href="visualize-data.html#change-the-colors-used-in-a-plot">Change the colors used in a plot</a></li>
<li><a href="visualize-data.html#change-the-range-of-the-x-or-y-axis">Change the range of the x or y axis</a></li>
<li><a href="visualize-data.html#use-polar-coordinates">Use polar coordinates</a></li>
<li><a href="visualize-data.html#flip-the-x-and-y-axes">Flip the x and y axes</a></li>
</ol>
</div>
<hr />
<div id="what-you-should-know-before-you-begin" class="section level2 unnumbered">
<h2>What you should know before you begin</h2>

<div class="rmdcaution">
<p>The ggplot2 package provides the most important tidyverse functions for making plots. These functions let you use the <a href="https://r4ds.had.co.nz/data-visualisation.html#the-layered-grammar-of-graphics">layered grammar of graphics</a> to describe the plot you wish to make. In theory, you can describe <em>any</em> plot with the layered grammar of graphics.</p>
To use ggplot2, you build and then extend the graph template described in <a href="visualize-data.html#make-a-plot">Make a plot</a>. ggplot is loaded when you run <code>library(tidyverse)</code>.
</div>

</div>
<div id="make-a-plot" class="section level2">
<h2><span class="header-section-number">9.1</span> Make a plot</h2>
<p>You want to make a plot.</p>
<div id="solution" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb237-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-237-1.png" width="672" /></p>
</div>
<div id="discussion" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Use the same code template to begin <em>any</em> plot:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> <span class="op">&lt;</span>X_VARIABLE<span class="op">&gt;</span>, <span class="dt">y =</span> <span class="op">&lt;</span>Y_VARIABLE<span class="op">&gt;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb238-2" data-line-number="2"><span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>()</a></code></pre></div>
<p>Replace <code>&lt;DATA&gt;</code>, <code>&lt;X_VARIABLE&gt;</code>, <code>&lt;Y_VARIABLE&gt;</code> and <code>&lt;GEOM_FUNCTION&gt;</code> with the data set, column names within that data set, and <a href="visualize-data.html#make-a-specific-type-of-plot-like-a-line-plot-bar-chart-etc.">geom_function</a> that you’d like to use in your plot. Within ggplot2 code, you should <em>not</em> surround column names with quotes.</p>
<p>The <code>geom_point()</code> function above will create a scatterplot. Notice that some type of plots, like a histogram, will not require a y variable, e.g.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cty)) <span class="op">+</span></a>
<a class="sourceLine" id="cb239-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_histogram</span>()</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-239-1.png" width="672" /></p>

<div class="rmdcaution">
When using the ggplot2 template, be sure to put each <code>+</code> at the <em>end</em> of the line it follows and never at the beginning of the line that follows it.
</div>

</div>
</div>
<div id="make-a-specific-type-of-plot-like-a-line-plot-bar-chart-etc." class="section level2">
<h2><span class="header-section-number">9.2</span> Make a specific “type” of plot, like a line plot, bar chart, etc.</h2>
<p>You want to make a plot that is not a scatterplot, as in the <a href="visualize-data.html#make-a-plot">Make a plot</a> recipe.</p>
<div id="solution-1" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb241-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-241-1.png" width="672" /></p>
</div>
<div id="discussion-1" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>The <code>&lt;GEOM_FUNCTION&gt;</code> in the <a href="visualize-data.html#make-a-plot">ggplot2 code template</a> determines which type of plot R will draw. So use the geom function that corresponds to the type of plot you have in mind. A complete list of geom functions can be found in the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-visualization-2.1.pdf">ggplot2 cheatsheet</a> or at the <a href="https://ggplot2.tidyverse.org/reference/index.html">ggplot2 package website</a>.</p>
<p>Geom is short for <em>geometric object</em>. It refers to the type of visual mark your plot uses to represent data.</p>
</div>
</div>
<div id="add-a-variable-to-a-plot-as-a-color-shape-etc." class="section level2">
<h2><span class="header-section-number">9.3</span> Add a variable to a plot as a color, shape, etc.</h2>
<p>You want to add a new variable your plot that will appear as a color, shape, line type or some other visual element accompanied by a legend.</p>
<div id="solution-2" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb242-2" data-line-number="2">  <span class="dt">data =</span> mpg, </a>
<a class="sourceLine" id="cb242-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class, <span class="dt">size =</span> cty)</a>
<a class="sourceLine" id="cb242-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb242-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-242-1.png" width="672" /></p>
</div>
<div id="discussion-2" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>In the language of ggplot2, visual elements, like color, are called <em>aesthetics</em>. Use the <code>mapping = aes()</code> argument of <code>ggplot</code> to map aesthetics to variables in the data set, like <code>class</code> and <code>cty</code>, in this example. Separate each new mapping with a comma. ggplot2 will automatically add a legend to the plot that explains which elements of the aesthetic correspond to which values of the variable.</p>
<p>Different types of plots support different types of aesthetics. To determine which aesthetics you may use, read the aesthetics section of the help page of the plot’s geom function, e.g. <code>?geom_point</code>.</p>

<div class="rmdcaution">
Aesthetic mappings must be defined inside of the <code>aes()</code> helper function, which preprocesses them to pass to ggplot2.
</div>

</div>
</div>
<div id="add-multiple-layers-to-a-plot" class="section level2">
<h2><span class="header-section-number">9.4</span> Add multiple layers to a plot</h2>
<p>You want to add multiple layers of data to your plot. For example, you want to overlay a trend line on top of a scatterplot.</p>
<div id="solution-3" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb243-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb243-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_smooth</span>()</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-244-1.png" width="672" /></p>
</div>
<div id="discussion-3" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>To add new layers to a plot, add new geom functions to the end of the plot’s <a href="visualize-data.html#make-a-plot">ggplot2 code template</a>. Each new geom will be drawn <em>on top</em> of the previous geoms in the same coordinate space.</p>

<div class="rmdcaution">
Be sure to put each <code>+</code> at the <em>end</em> of the line it follows and never at the beginning of the line that follows it.
</div>

<p>When you use multiple geoms, data and mappings defined in <code>ggplot()</code> are applied <em>globally</em> to each geom. You may also define data and mappings within each geom function. These will be applied locally to only the geom in which they are defined. For that geom, local mappings will override and extend global ones, e.g.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb245-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_smooth</span>()</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-246-1.png" width="672" /></p>
</div>
</div>
<div id="subdivide-a-plot-into-multiple-subplots" class="section level2">
<h2><span class="header-section-number">9.5</span> Subdivide a plot into multiple subplots</h2>
<p>You want to make a collection of subplots that each display a different part of the data set.</p>
<div id="solution-4" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb247-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>class)</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-247-1.png" width="672" /></p>
</div>
<div id="discussion-4" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>In ggplot2 vocabulary, subplots are called <em>facets</em>. Each subplot shares the same x and y variables, which facilitates comparison.</p>
<p>Use one of two functions to facet your plot.<code>facet_wrap()</code> creates a separate subplot for each value of a variable. Pass the variable to <code>facet_wrap()</code> preceded by a <code>~</code>.</p>
<p><code>facet_grid()</code> creates a grid of facets based on the combinations of values of <em>two</em> variables. Pass <code>facet_grid()</code> two variables separated by a <code>~</code>, e.g.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb248-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb248-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_grid</span>(cyl <span class="op">~</span><span class="st"> </span>fl)</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-248-1.png" width="672" /></p>
</div>
</div>
<div id="add-a-title-subtitle-or-caption-to-a-plot" class="section level2">
<h2><span class="header-section-number">9.6</span> Add a title, subtitle, or caption to a plot</h2>
<p>You want to add a title and subtitle above your plot, and/or a caption below it.</p>
<div id="solution-5" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb249-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb249-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb249-4" data-line-number="4">    <span class="dt">title =</span> <span class="st">&quot;Engine size vs. Fuel efficiency&quot;</span>,</a>
<a class="sourceLine" id="cb249-5" data-line-number="5">    <span class="dt">subtitle =</span> <span class="st">&quot;Fuel efficiency estimated for highway driving&quot;</span>,</a>
<a class="sourceLine" id="cb249-6" data-line-number="6">    <span class="dt">caption =</span> <span class="st">&quot;Data from fueleconomy.gov&quot;</span></a>
<a class="sourceLine" id="cb249-7" data-line-number="7">  )</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-249-1.png" width="672" /></p>
</div>
<div id="discussion-5" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>The <code>labs()</code> function adds labels to ggplot2 plots. Each argument of <code>labs()</code> is optional. Labels should be provided as character strings.</p>
</div>
</div>
<div id="change-the-axis-labels-of-a-plot" class="section level2">
<h2><span class="header-section-number">9.7</span> Change the axis labels of a plot</h2>
<p>You want to change the names of the x and y axes.</p>
<div id="solution-6" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb250-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb250-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb250-4" data-line-number="4">    <span class="dt">title =</span> <span class="st">&quot;Engine size vs. Fuel efficiency&quot;</span>,</a>
<a class="sourceLine" id="cb250-5" data-line-number="5">    <span class="dt">x =</span> <span class="st">&quot;Engine Displacement (L)&quot;</span>,</a>
<a class="sourceLine" id="cb250-6" data-line-number="6">    <span class="dt">y =</span> <span class="st">&quot;Fuel Efficiency (MPG)&quot;</span></a>
<a class="sourceLine" id="cb250-7" data-line-number="7">  )</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-250-1.png" width="672" /></p>
</div>
<div id="discussion-6" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>By default, ggplot2 labels the x and y axes with the names of the variables mapped to the axes. Override this with the <code>x</code> and <code>y</code> arguments of <code>labs()</code>.</p>
</div>
</div>
<div id="change-the-title-of-a-legend" class="section level2">
<h2><span class="header-section-number">9.8</span> Change the title of a legend</h2>
<p>You want to change the title of a legend.</p>
<div id="solution-7" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb251-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb251-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color =</span> <span class="st">&quot;Type of car&quot;</span>)</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-251-1.png" width="672" /></p>
</div>
<div id="discussion-7" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>ggplot2 creates a legend for each aesthetic except for <code>x</code>, <code>y</code>, and <code>group</code>. By default, ggplot2 labels the legend with the name of the variable mapped to the aesthetic. To override this, add the <code>labs()</code> function to your template and pass a character string to the aesthetic whose legend you want to relabel.</p>
<p>Use a <code>\n</code> to place a line break in the title, e.g.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb252-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb252-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color =</span> <span class="st">&quot;Type of</span><span class="ch">\n</span><span class="st">car&quot;</span>)</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-252-1.png" width="672" /></p>
</div>
</div>
<div id="change-the-names-within-a-legend" class="section level2">
<h2><span class="header-section-number">9.9</span> Change the names within a legend</h2>
<p>You want to change the value labels that appear within a legend.</p>
<div id="solution-8" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb253-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb253-3" data-line-number="3"><span class="st">  </span><span class="kw">scale_color_discrete</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Two seater&quot;</span>, <span class="st">&quot;Compact&quot;</span> ,<span class="st">&quot;Sedan&quot;</span>, <span class="st">&quot;Minivan&quot;</span>, <span class="st">&quot;Truck&quot;</span>, <span class="st">&quot;Subcompact&quot;</span>, <span class="st">&quot;SUV&quot;</span>))</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-253-1.png" width="672" /></p>
</div>
<div id="discussion-8" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>To change the labels within a legend, you must interact with ggplot2’s <a href="https://r4ds.had.co.nz/graphics-for-communication.html#scales">scale system</a>. To do this:</p>
<ol style="list-style-type: decimal">
<li>Determine which scale the plot will use. This will be a function whose name is composed of <code>scale_</code>, followed by the name of an aesthetic, followed by <code>_</code>, followed by an identifier, often <code>discrete</code> or <code>continuous</code>.</li>
<li>Explicitly add the scale to your code template</li>
<li>Set the labels argument of the scale to a vector of character strings, one for each label in the legend.</li>
</ol>
</div>
</div>
<div id="remove-the-legend-from-a-plot" class="section level2">
<h2><span class="header-section-number">9.10</span> Remove the legend from a plot</h2>
<p>You want to remove the legend from a ggplot2 plot.</p>
<div id="solution-9" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb254-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb254-3" data-line-number="3"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-254-1.png" width="672" /></p>
</div>
<div id="discussion-9" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>To suppress legends, add <code>theme()</code> to the end of your <a href="visualize-data.html#make-a-plot">ggplot2 code template</a>. Pass it the argument <code>legend.position = &quot;none&quot;</code>.</p>
</div>
</div>
<div id="change-the-appearance-or-look-of-a-plot" class="section level2">
<h2><span class="header-section-number">9.11</span> Change the appearance or look of a plot</h2>
<p>You want to change the appearance of the <em>non-data</em> elements of your plot.</p>
<div id="solution-10" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb255-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb255-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-255-1.png" width="672" /></p>
</div>
<div id="discussion-10" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>The appearance of the non-data elements of a ggplot2 plot are controlled by a <em>theme</em>. To give your plot a theme, add a theme function to your <a href="visualize-data.html#make-a-plot">ggplot2 code template</a>. ggplot2 comes with nine theme functions, <code>theme_grey()</code>, <code>theme_bw()</code>, <code>theme_linedraw()</code>, <code>theme_light()</code>, <code>theme_dark()</code>, <code>theme_minimal()</code>, <code>theme_classic()</code>, <code>theme_void()</code>, <code>theme_test()</code>, and more can be loaded from the <a href="https://jrnold.github.io/ggthemes/reference/index.html">ggthemes package</a>.</p>
<p>Use the <code>theme()</code> function to tweak individual elements of the active theme as in <a href="visualize-data.html#remove-the-legend-from-a-plot">Remove the legend from a plot</a>.</p>
</div>
</div>
<div id="change-the-colors-used-in-a-plot" class="section level2">
<h2><span class="header-section-number">9.12</span> Change the colors used in a plot</h2>
<p>You want to change the colors that you plot uses to display data.</p>
<div id="solution-11" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb256-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb256-3" data-line-number="3"><span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Spectral&quot;</span>)</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-256-1.png" width="672" /></p>
</div>
<div id="discussion-11" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>ggplot2 uses colors for both the <code>color</code> and <code>fill</code> aesthetics. Determine which one you are using, and then add a new color of fill scale with ggplot2’s <a href="https://r4ds.had.co.nz/graphics-for-communication.html#scales">scale system</a>. See the <a href="https://ggplot2.tidyverse.org/reference/index.html">ggplot2 website</a> for a list of available scales. Additional scales are available in the <a href="https://jrnold.github.io/ggthemes/reference/index.html">ggthemes package</a>.</p>
<p><code>scale_color_brewer()</code>/<code>scale_fill_brewer()</code> (for discrete data) and <code>scale_color_distill()</code>/<code>scale_fill_distill()</code> (for continuous data) are popular choices for pleasing color schemes. Each takes a <code>palette</code> argument that can be set to the name of any of the scales displayed below</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" data-line-number="1"><span class="co"># install.packages(RColorBrewer)</span></a>
<a class="sourceLine" id="cb257-2" data-line-number="2"><span class="kw">library</span>(RColorBrewer)</a>
<a class="sourceLine" id="cb257-3" data-line-number="3"><span class="kw">display.brewer.all</span>()</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-257-1.png" width="672" /></p>
<p><code>scale_color_viridis_d()</code>/<code>scale_fill_viridis_d()</code> (for discrete data) and <code>scale_color_viridis()_c</code>/<code>scale_fill_viridis()_c</code> (for continuous data) are another popular choice for continuous data. Each takes an <code>option</code> argument that can be set to one of the palette names below.</p>
<p><img src="images/viridis.png" /><!-- --></p>
<p>The <a href="https://nanx.me/ggsci/"><code>ggsci</code></a> and <a href="https://github.com/karthik/wesanderson"><code>wesanderson</code></a> packages also provide popular color scales.</p>
</div>
</div>
<div id="change-the-range-of-the-x-or-y-axis" class="section level2">
<h2><span class="header-section-number">9.13</span> Change the range of the x or y axis</h2>
<p>You want to change the range of the x or y axes, effectively zooming in or out on your data.</p>
<div id="solution-12" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb258-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb258-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_smooth</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb258-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">7</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">30</span>)) </a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-259-1.png" width="672" /></p>
</div>
<div id="discussion-12" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Each ggplot2 plot uses a coordinate system, which can be set by adding a <code>coord_</code> function to the <a href="visualize-data.html#make-a-plot">ggplot2 code template</a>. If you do add a <code>coord_</code> function, ggplot2 will use <code>coord_cartesian()</code> whihc provides a cartesian coordinate system.</p>
<p>To change the range of a plot, set one or both of the <code>xlim</code> and <code>ylim</code> arguments of its <code>coord_</code> function. Each argument taxes a vector of length two: the minimum and maximum values for the range of the x or y axis.</p>
</div>
</div>
<div id="use-polar-coordinates" class="section level2">
<h2><span class="header-section-number">9.14</span> Use polar coordinates</h2>
<p>You want to make a polar plot, e.g. one that uses polar coordinates.</p>
<div id="solution-13" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb260-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb260-3" data-line-number="3"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="dt">theta =</span> <span class="st">&quot;x&quot;</span>)</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-260-1.png" width="672" /></p>
</div>
<div id="discussion-13" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>To draw a plot in a polar coordinate system, add <code>coord_polar()</code> to the <a href="visualize-data.html#make-a-plot">ggplot2 code template</a>. Set the <code>theta</code> argument to <code>&quot;x&quot;</code> or <code>&quot;y&quot;</code> to indicate which axis should be mapped to the angle of the polar coordinate system (defaults to <code>&quot;x&quot;</code>).</p>
</div>
</div>
<div id="flip-the-x-and-y-axes" class="section level2">
<h2><span class="header-section-number">9.15</span> Flip the x and y axes</h2>
<p>You want to flip the plot along its diagonal, swapping the locations of the x and y axes.</p>
<div id="solution-14" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut)) <span class="op">+</span></a>
<a class="sourceLine" id="cb261-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb261-3" data-line-number="3"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="tidyverse-cookbook_files/figure-html/unnamed-chunk-261-1.png" width="672" /></p>
</div>
<div id="discussion-14" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>To flip a plot, add <code>coord_flip()</code> to the <a href="visualize-data.html#make-a-plot">ggplot2 code template</a>. This swaps the locations of the x and y axes and keeps the correct orientation of all words.</p>
<p><code>coord_flip()</code> has a different effect from merely exchanging the x and y variables. For example, you can use it to make bars and boxplots extend horizontally instead of vertically.</p>
<!--

You want to

#### Solution {-}

#### Discussion {-}
-->

</div>
</div>
</div>












            </section>

          </div>
        </div>
      </div>
<a href="transform-dates-and-times.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio-education/tidyverse-cookbook/edit/master/09-visualize-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
