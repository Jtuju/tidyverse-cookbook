<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Import | The Tidyverse Cookbook</title>
  <meta name="description" content="How to solve common data science tasks with R’s Tidyverse" />
  <meta name="generator" content="bookdown 0.20.1 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Import | The Tidyverse Cookbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="How to solve common data science tasks with R’s Tidyverse" />
  <meta name="github-repo" content="rstudio-education/tidyverse-cookbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Import | The Tidyverse Cookbook" />
  
  <meta name="twitter:description" content="How to solve common data science tasks with R’s Tidyverse" />
  

<meta name="author" content="Edited by Garrett Grolemund" />


<meta name="date" content="2020-07-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="program.html"/>
<link rel="next" href="tidy.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Tidyverse Cookbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html"><i class="fa fa-check"></i>How to use this book</a></li>
<li class="part"><span><b>I The Recipes</b></span></li>
<li class="chapter" data-level="1" data-path="program.html"><a href="program.html"><i class="fa fa-check"></i><b>1</b> Program</a></li>
<li class="chapter" data-level="2" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>2</b> Import</a></li>
<li class="chapter" data-level="3" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>3</b> Tidy</a></li>
<li class="chapter" data-level="4" data-path="transform-tables.html"><a href="transform-tables.html"><i class="fa fa-check"></i><b>4</b> Transform Tables</a></li>
<li class="chapter" data-level="5" data-path="transform-lists-and-vectors.html"><a href="transform-lists-and-vectors.html"><i class="fa fa-check"></i><b>5</b> Transform Lists and Vectors</a></li>
<li class="chapter" data-level="6" data-path="transform-strings.html"><a href="transform-strings.html"><i class="fa fa-check"></i><b>6</b> Transform Strings</a></li>
<li class="chapter" data-level="7" data-path="transform-factors.html"><a href="transform-factors.html"><i class="fa fa-check"></i><b>7</b> Transform Factors</a></li>
<li class="chapter" data-level="8" data-path="transform-dates-and-times.html"><a href="transform-dates-and-times.html"><i class="fa fa-check"></i><b>8</b> Transform Dates and Times</a></li>
<li class="chapter" data-level="9" data-path="visualize-data.html"><a href="visualize-data.html"><i class="fa fa-check"></i><b>9</b> Visualize Data</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Tidyverse Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="import" class="section level1">
<h1><span class="header-section-number">2</span> Import</h1>
<hr />
<p>This chapter includes the following recipes:</p>
<div class="col2">
<ol style="list-style-type: decimal">
<li><a href="import.html#import-data-quickly-with-a-gui">Import data quickly with a GUI</a></li>
<li><a href="import.html#read-a-comma-separated-values-csv-file">Read a comma-separated values (csv) file</a></li>
<li><a href="import.html#read-a-semi-colon-delimited-file">Read a semi-colon delimited file</a></li>
<li><a href="import.html#read-a-tab-delimited-file">Read a tab delimited file</a></li>
<li><a href="import.html#read-a-text-file-with-an-unusual-delimiter">Read a text file with an unusual delimiter</a></li>
<li><a href="import.html#read-a-fixed-width-file">Read a fixed-width file</a></li>
<li><a href="import.html#read-a-file-no-header">Read a file no header</a></li>
<li><a href="import.html#skip-lines-at-the-start-of-a-file-when-reading-a-file">Skip lines at the start of a file when reading a file</a></li>
<li><a href="import.html#skip-lines-at-the-end-of-a-file-when-reading-a-file">Skip lines at the end of a file when reading a file</a></li>
<li><a href="import.html#replace-missing-values-as-you-read-a-file">Replace missing values as you read a file</a></li>
<li><a href="import.html#read-an-excel-spreadsheet">Read an excel spreadsheet</a></li>
<li><a href="import.html#read-a-single-sheet-from-an-excel-spreadsheet">Read a single sheet from an excel spreadsheet</a></li>
<li><a href="import.html#read-a-field-of-cells-from-an-excel-spreadsheet">Read a field of cells from an excel spreadsheet</a></li>
<li><a href="import.html#read-a-compressed-rds-file">Read a compressed RDS file</a></li>
<li><a href="import.html#write-to-a-comma-separate-values-csv-file">Write to a comma-separate values (csv) file</a></li>
<li><a href="import.html#write-to-a-tab-delimited-file">Write to a tab-delimited file</a></li>
<li><a href="import.html#write-to-a-text-file-with-arbitrary-delimiters">Write to a text file with arbitrary delimiters</a></li>
<li><a href="import.html#write-to-an-excel-spreadsheet">Write to an excel spreadsheet</a></li>
<li><a href="import.html#write-to-a-compressed-rds-file">Write to a compressed RDS file</a></li>
</ol>
</div>
<hr />
<div id="what-you-should-know-before-you-begin" class="section level2 unnumbered">
<h2>What you should know before you begin</h2>

<div class="rmdcaution">
<p>Before you can manipulate data with R, you need to import the data into R’s memory, or build a connection to the data that R can use to access the data remotely. For example, you can build a connection to data that lives in a database.</p>
<p>How you import your data will depend on the format of the data. The most common way to store small data sets is as a plain text file. Data may also be stored in a proprietary format associated with a specific piece of software, such as SAS, SPSS, or Microsoft Excel. Data used on the internet is often stored as a JSON or XML file. Large data sets may be stored in a database or a distributed storage system.</p>
<p>When you import data into R, R stores the data in your computer’s RAM while you manipulate it. This creates a size limitation: truly big data sets should be stored outside of R in a database or a distributed storage system. You can then create a connection to the system that R can use to access the data without bringing the data into your computer’s RAM.</p>
<p>The readr package contains the most common functions in the tidyverse for importing data. The readr package is loaded when you run <code>library(tidyverse)</code>. The tidyverse also includes the following packages for importing specific types of data. These are not loaded with <code>library(tidyverse)</code>. You must load them individually when you need them.</p>
<ul>
<li>DBI - connect to databases</li>
<li>haven - read SPSS, Stata, or SAS data</li>
<li>httr - access data over web APIs</li>
<li>jsonlite - read JSON</li>
<li>readxl - read Excel spreadsheets</li>
<li>rvest - scrape data from the web</li>
<li>xml2 - read XML
</div></li>
</ul>
</div>
<div id="import-data-quickly-with-a-gui" class="section level2">
<h2><span class="header-section-number">2.1</span> Import data quickly with a GUI</h2>
<p>You want to import data quickly, and you do not mind using a semi-reproducible graphical user interface (GUI) to do so. Your data is not so big that it needs to stay in a database or external storage system.</p>
<div id="solution" class="section level4 unnumbered">
<h4>Solution</h4>
<p><img src="images/import-dataset.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="discussion" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>The RStudio IDE provides an Import Dataset button in the Environment pane, which appears in the top right corner of the IDE by default. You can use this button to import data that is stored in plain text files as well as in Excel, SAS, SPSS, and Stata files.</p>
<p>Click the button to launch a window that includes a file browser (below). Use the browser to select the file to import.</p>
<p><img src="images/import-wizard.png" width="80%" style="display: block; margin: auto;" /></p>
<p>After you’ve selected a file, RStudio will display a preview of how the file will be imported as a data frame. Below the preview, RStudio provides a GUI interface to the common options for importing the type of file you have selected. As you customize the options, RStudio updates the data preview to display the results.</p>
<p>The bottom right-hand corner of the window displays R code that, if run, will reproduce your importation process programatically. You should copy and save this code if you wish to document your work in a reproducible workflow.</p>
</div>
</div>
<div id="read-a-comma-separated-values-csv-file" class="section level2">
<h2><span class="header-section-number">2.2</span> Read a comma-separated values (csv) file</h2>
<p>You want to read a .csv file.</p>
<p><img src="images/readr-csv.png" style="display: block; margin: auto;" /></p>
<div id="solution-1" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="co"># To make a .csv file to read</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">write_file</span>(<span class="dt">x =</span> <span class="st">&quot;a,b,c</span><span class="ch">\n</span><span class="st">1,2,3</span><span class="ch">\n</span><span class="st">4,5,NA&quot;</span>, <span class="dt">path =</span> <span class="st">&quot;file.csv&quot;</span>)</a>
<a class="sourceLine" id="cb35-3" data-line-number="3"></a>
<a class="sourceLine" id="cb35-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;file.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5    NA</code></pre>
</div>
<div id="discussion-1" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Comma separated value (.csv) files are plain text files arranged so that each line contains a row of data and each cell within a line is separated by a comma. Most data analysis software can export their data as .csv files. So if you are in a pinch you can usually export data from a program as a .csv and then read it into R.</p>
<p>You can also use <code>read_csv()</code> to import csv files that are hosted at their own unique URL. This only works if you are connected to the internet, e.g.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">my_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/rstudio-education/tidyverse-cookbook/master/data/mtcars.csv&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="read-a-semi-colon-delimited-file" class="section level2">
<h2><span class="header-section-number">2.3</span> Read a semi-colon delimited file</h2>
<p>You want to read a file that resembles a <a href="import.html#read-a-comma-separated-values-csv-file">csv</a>, but uses a <em>semi-colon</em> to separate cells.</p>
<p><img src="images/readr-csv2.png" style="display: block; margin: auto;" /></p>
<div id="solution-2" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="co"># To make a .csv file to read</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw">write_file</span>(<span class="dt">x =</span> <span class="st">&quot;a;b;c</span><span class="ch">\n</span><span class="st">1;2;3</span><span class="ch">\n</span><span class="st">4;5;NA&quot;</span>, <span class="dt">path =</span> <span class="st">&quot;file2.csv&quot;</span>)</a>
<a class="sourceLine" id="cb40-3" data-line-number="3"></a>
<a class="sourceLine" id="cb40-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_csv2</span>(<span class="st">&quot;file2.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Using &#39;,&#39; as decimal and &#39;.&#39; as grouping mark. Use read_delim() for more control.</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5    NA</code></pre>
</div>
<div id="discussion-2" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Semi-colon delimited files are popular in parts of the world that use commas for decimal places, like Europe. Semi-colon delimited files are often still given the .csv file extension.</p>
</div>
</div>
<div id="read-a-tab-delimited-file" class="section level2">
<h2><span class="header-section-number">2.4</span> Read a tab delimited file</h2>
<p>You want to read a file that resembles a <a href="import.html#read-a-comma-separated-values-csv-file">csv</a>, but uses a <em>tab</em> to separate cells.</p>
<p><img src="images/readr-tab.png" style="display: block; margin: auto;" /></p>
<div id="solution-3" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="co"># To make a .tsv file to read</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="kw">write_file</span>(<span class="dt">x =</span> <span class="st">&quot;a</span><span class="ch">\t</span><span class="st">b</span><span class="ch">\t</span><span class="st">c</span><span class="ch">\n</span><span class="st">1</span><span class="ch">\t</span><span class="st">2</span><span class="ch">\t</span><span class="st">3</span><span class="ch">\n</span><span class="st">4</span><span class="ch">\t</span><span class="st">5</span><span class="ch">\t</span><span class="st">NA&quot;</span>, <span class="dt">path =</span> <span class="st">&quot;file.tsv&quot;</span>)</a>
<a class="sourceLine" id="cb45-3" data-line-number="3"></a>
<a class="sourceLine" id="cb45-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;file.tsv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5    NA</code></pre>
</div>
<div id="discussion-3" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Tab delimited files are text files that place each row of a table in its own line, and separate each cell within a line with a tab. Tab delimited files commonly have the extensions .tab, .tsv, and .txt.</p>
</div>
</div>
<div id="read-a-text-file-with-an-unusual-delimiter" class="section level2">
<h2><span class="header-section-number">2.5</span> Read a text file with an unusual delimiter</h2>
<p>You want to read a file that resembles a <a href="import.html#read-a-comma-separated-values-csv-file">csv</a>, but uses <em>something other than a comma</em> to separate cells.</p>
<p><img src="images/readr-delim.png" style="display: block; margin: auto;" /></p>
<div id="solution-4" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="co"># To make a file to read</span></a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="kw">write_file</span>(<span class="dt">x =</span> <span class="st">&quot;a|b|c</span><span class="ch">\n</span><span class="st">1|2|3</span><span class="ch">\n</span><span class="st">4|5|NA&quot;</span>, <span class="dt">path =</span> <span class="st">&quot;file.txt&quot;</span>)</a>
<a class="sourceLine" id="cb49-3" data-line-number="3"></a>
<a class="sourceLine" id="cb49-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="st">&quot;file.txt&quot;</span>, <span class="dt">delim =</span> <span class="st">&quot;|&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5    NA</code></pre>
</div>
<div id="discussion-4" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Use <code>read_delim()</code> as you would <a href="import.html#read-a-comma-separated-values-csv-file"><code>read_csv()</code></a>. Pass the delimiter that your file uses as a character string to the <code>delim</code> argument of <code>read_delim()</code>.</p>
</div>
</div>
<div id="read-a-fixed-width-file" class="section level2">
<h2><span class="header-section-number">2.6</span> Read a fixed-width file</h2>
<p>You want to read a .fwf file, which uses the fixed width format to represent a table (each column begins <span class="math inline">\(n\)</span> spaces from the left for every line).</p>
<p><img src="images/readr-fwf.png" style="display: block; margin: auto;" /></p>
<div id="solution-5" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="co"># To make a .fwf file to read</span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">write_file</span>(<span class="dt">x =</span> <span class="st">&quot;a b c</span><span class="ch">\n</span><span class="st">1 2 3</span><span class="ch">\n</span><span class="st">4 5 NA&quot;</span>, <span class="dt">path =</span> <span class="st">&quot;file.fwf&quot;</span>)</a>
<a class="sourceLine" id="cb53-3" data-line-number="3"></a>
<a class="sourceLine" id="cb53-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_table</span>(<span class="st">&quot;file.fwf&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5    NA</code></pre>
</div>
<div id="discussion-5" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Fixed width files arrange data so that each row of a table is in its own line, and each cell begins at a <em>fixed</em> number of character spaces from the beginning of the line. For example, in the example below, the cells in the second column each begin
20 spaces from the beginning of the line, no matter many spaces the contents of the first cell required. At first glance, it is easy to mistake fixed width files for tab delimited files. Fixed with files use individual spaces to separate cells, and not tabs.</p>
<pre><code>John Smith          WA        418-Y11-4111
Mary Hartford       CA        319-Z19-4341
Evan Nolan          IL        219-532-c301</code></pre>
<p><code>read_table()</code> will read fixed-width files where each column is separated by at least one whitespace on every line. Use <code>read_fwf()</code> to read fixed-width files that have non-standard formatting.</p>
</div>
</div>
<div id="read-a-file-no-header" class="section level2">
<h2><span class="header-section-number">2.7</span> Read a file no header</h2>
<p>You want to read a file that does not include a line of column names at the start of the file.</p>
<p><img src="images/readr-header.png" style="display: block; margin: auto;" /></p>
<div id="solution-6" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="co"># To make a .csv file to read</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="kw">write_file</span>(<span class="st">&quot;1,2,3</span><span class="ch">\n</span><span class="st">4,5,NA&quot;</span>,<span class="st">&quot;file.csv&quot;</span>)</a>
<a class="sourceLine" id="cb58-3" data-line-number="3"></a>
<a class="sourceLine" id="cb58-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;file.csv&quot;</span>, <span class="dt">col_names =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5    NA</code></pre>
</div>
<div id="discussion-6" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>If you do not wish to supply column names, set <code>col_names = FALSE</code>. The <code>col_names</code> argument works for all readr functions that read tabular data.</p>
</div>
</div>
<div id="skip-lines-at-the-start-of-a-file-when-reading-a-file" class="section level2">
<h2><span class="header-section-number">2.8</span> Skip lines at the start of a file when reading a file</h2>
<p>You want to read a portion of a file, skipping one or more lines at the <em>start</em> of the file. For example, you want to avoid reading the introductory text at the start of a file.</p>
<p><img src="images/readr-skip.png" style="display: block; margin: auto;" /></p>
<div id="solution-7" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="co"># To make a .csv file to read</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="kw">write_file</span>(<span class="st">&quot;a,b,c</span><span class="ch">\n</span><span class="st">1,2,3</span><span class="ch">\n</span><span class="st">4,5,NA&quot;</span>,<span class="st">&quot;file.csv&quot;</span>)</a>
<a class="sourceLine" id="cb62-3" data-line-number="3"></a>
<a class="sourceLine" id="cb62-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;file.csv&quot;</span>, <span class="dt">skip =</span> <span class="dv">1</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   `1` = col_double(),
##   `2` = col_double(),
##   `3` = col_logical()
## )</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##     `1`   `2` `3`  
##   &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
## 1     4     5 NA</code></pre>
</div>
<div id="discussion-7" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Set <code>skip</code> equal to the number of lines you wish to skip before you begin reading the file. The <code>skip</code> argument works for all readr functions that read tabular data, and can be combined with the <a href="import.html#skip-lines-at-the-end-of-a-file-when-reading-a-file"><code>n_max</code> argument</a> to skip more lines at the end of a file.</p>
<p>When in doubt, first try reading the file with <code>read_lines(&quot;file.csv&quot;)</code> to determine how many lines you need to skip.</p>
</div>
</div>
<div id="skip-lines-at-the-end-of-a-file-when-reading-a-file" class="section level2">
<h2><span class="header-section-number">2.9</span> Skip lines at the end of a file when reading a file</h2>
<p>You want to read a portion of a file, skipping one or more lines at the <em>end</em> of the file. For example, you want to avoid reading in a text comment that appears at the end of a file.</p>
<p><img src="images/readr-nmax.png" style="display: block; margin: auto;" /></p>
<div id="solution-8" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="co"># To make a .csv file to read</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="kw">write_file</span>(<span class="st">&quot;a,b,c</span><span class="ch">\n</span><span class="st">1,2,3</span><span class="ch">\n</span><span class="st">4,5,NA&quot;</span>,<span class="st">&quot;file.csv&quot;</span>)</a>
<a class="sourceLine" id="cb66-3" data-line-number="3"></a>
<a class="sourceLine" id="cb66-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;file.csv&quot;</span>, <span class="dt">n_max =</span> <span class="dv">1</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3</code></pre>
</div>
<div id="discussion-8" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>Set <code>n_max</code> equal to the number of <em>non-header</em> lines you wish to read before you stop reading lines. The <code>n_max</code> argument works for all readr functions that read tabular data.</p>
<p>When in doubt, first try reading the file with <code>read_lines(&quot;file.csv&quot;)</code> to determine how many lines you need to skip.</p>
</div>
</div>
<div id="replace-missing-values-as-you-read-a-file" class="section level2">
<h2><span class="header-section-number">2.10</span> Replace missing values as you read a file</h2>
<p>You want to convert missing values to NA as you read a file, because they have been recorded with a different symbol.</p>
<p><img src="images/readr-missing.png" style="display: block; margin: auto;" /></p>
<div id="solution-9" class="section level4 unnumbered">
<h4>Solution</h4>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="co"># To make a .csv file to read</span></a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="kw">write_file</span>(<span class="st">&quot;a,b,c</span><span class="ch">\n</span><span class="st">1,2,3</span><span class="ch">\n</span><span class="st">4,5,.&quot;</span>,<span class="st">&quot;file.csv&quot;</span>)</a>
<a class="sourceLine" id="cb70-3" data-line-number="3"></a>
<a class="sourceLine" id="cb70-4" data-line-number="4">my_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;file.csv&quot;</span>, <span class="dt">na =</span> <span class="st">&quot;.&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   a = col_double(),
##   b = col_double(),
##   c = col_double()
## )</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">my_data</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       a     b     c
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2     3
## 2     4     5    NA</code></pre>
</div>
<div id="discussion-9" class="section level4 unnumbered">
<h4>Discussion</h4>
<p>R’s uses the string <code>NA</code> to represent missing data. If your file was exported from another language or application, it might use a different convention. R is likely to read in the convention as a character string, failing to understand that it represents missing data. To prevent this, explicitly tell <code>read_csv()</code> which strings are used to represent missing data.</p>
<p>The <code>na</code> argument works for all readr functions that read tabular data.</p>
</div>
</div>
<div id="read-an-excel-spreadsheet" class="section level2">
<h2><span class="header-section-number">2.11</span> Read an excel spreadsheet</h2>
<p>You want to</p>
<div id="solution-10" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-10" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="read-a-single-sheet-from-an-excel-spreadsheet" class="section level2">
<h2><span class="header-section-number">2.12</span> Read a single sheet from an excel spreadsheet</h2>
<p>You want to</p>
<div id="solution-11" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-11" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="read-a-field-of-cells-from-an-excel-spreadsheet" class="section level2">
<h2><span class="header-section-number">2.13</span> Read a field of cells from an excel spreadsheet</h2>
<p>You want to</p>
<div id="solution-12" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-12" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="read-a-compressed-rds-file" class="section level2">
<h2><span class="header-section-number">2.14</span> Read a compressed RDS file</h2>
<p>You want to</p>
<div id="solution-13" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-13" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="write-to-a-comma-separate-values-csv-file" class="section level2">
<h2><span class="header-section-number">2.15</span> Write to a comma-separate values (csv) file</h2>
<p>You want to</p>
<div id="solution-14" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-14" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="write-to-a-tab-delimited-file" class="section level2">
<h2><span class="header-section-number">2.16</span> Write to a tab-delimited file</h2>
<p>You want to</p>
<div id="solution-15" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-15" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="write-to-a-text-file-with-arbitrary-delimiters" class="section level2">
<h2><span class="header-section-number">2.17</span> Write to a text file with arbitrary delimiters</h2>
<p>You want to</p>
<div id="solution-16" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-16" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="write-to-an-excel-spreadsheet" class="section level2">
<h2><span class="header-section-number">2.18</span> Write to an excel spreadsheet</h2>
<p>You want to</p>
<div id="solution-17" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-17" class="section level4 unnumbered">
<h4>Discussion</h4>
</div>
</div>
<div id="write-to-a-compressed-rds-file" class="section level2">
<h2><span class="header-section-number">2.19</span> Write to a compressed RDS file</h2>
<p>You want to</p>
<div id="solution-18" class="section level4 unnumbered">
<h4>Solution</h4>
</div>
<div id="discussion-18" class="section level4 unnumbered">
<h4>Discussion</h4>
<!--

You want to

#### Solution {-}

#### Discussion {-}
-->

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="program.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio-education/tidyverse-cookbook/edit/master/02-import.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
